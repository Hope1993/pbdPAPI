papi_home = ./papi-5.3.0/src/
PKG_CFLAGS = -I./build/include/
PKG_CPICFLAGS = ${CPICFLAGS}

OBJECTS = flops.o example.o

all: $(SHLIB)

$(SHLIB): mkpapi $(OBJECTS)

$(OBJECTS): mkpapi

mkpapi: build_papi
	@sed -i "s#PKG_CPICFLAGS#${PKG_CPICFLAGS}#g" build_papi
	( cd ${papi_home}; sh ../../build_papi )

clean:
	rm -rf ./build
